#!/bin/bash

######################################################################
#           Auto Install & Optimize LEMP Stack on Ubuntu             #
#                                                                    #
#                Author: TinyActive - Base On HOSTVN.VN Scripts      #
#                  Website: https://github.com/TinyActive/panel      #
#                                                                    #
#              Please do not remove copyright. Thank!                #
#  Please do not copy under any circumstance for commercial reason!  #
######################################################################

# shellcheck disable=SC2154
source /var/tinycp/.hostvn.conf
source /var/tinycp/menu/route/parent
source /var/tinycp/menu/helpers/variable_common
source /var/tinycp/ipaddress
# shellcheck source=/var/tinycp/menu/lang/*
source /var/tinycp/menu/lang/"${lang}"

CHOICE=1

printf "${GREEN}%s${NC}\n" "=============================================================="
printf "${GREEN}%s${NC}\n" "                  ${AUTHOR} Scripts - VPS Manager"
printf "${GREEN}%s${NC}\n" "                ${AUTHOR_WEB} - Version ${script_version}"
printf "${GREEN}%s${NC}\n" "--------------------------------------------------------------"
printf "${GREEN}%s${NC}\n" " IP VPS        : ${NC}${IPADDRESS}"
printf "${RED}%s${NC}\n"   " phpMyAdmin    : http://${IPADDRESS}:${admin_port}/phpmyadmin"
printf "${GREEN}%s${NC}\n" "=============================================================="

while [ "${CHOICE}" != "0" ]
do
    printf "\n${GREEN}╔══════════════════════════════════════════════════════════════╗${NC}\n"
    printf "${GREEN}║               %s                 ║${NC}\n" "MAIN MENU"
    printf "${GREEN}╚══════════════════════════════════════════════════════════════╝${NC}\n"
    
    # Website Management
    printf "\n${GREEN}┌─ WEBSITE MANAGEMENT ${NC}\n"
    printf "${GREEN}│${NC}\n"
    printf "${GREEN}│ [1]${NC} ⟹  ${lang_manager_domain}\n"
    printf "${GREEN}│ [2]${NC} ⟹  ${lang_manager_ssl}\n"
    printf "${GREEN}│ [3]${NC} ⟹  ${lang_manager_cache}\n"
    printf "${GREEN}│ [7]${NC} ⟹  ${lang_manager_wordpress}\n"
    
    # System Management
    printf "\n${GREEN}┌─ SYSTEM MANAGEMENT ${NC}\n"
    printf "${GREEN}│${NC}\n"
    printf "${GREEN}│ [4]${NC} ⟹  ${lang_manager_lemp} (Nginx - MariaDB - PHP - SFTP - Log)\n"
    printf "${GREEN}│ [5]${NC} ⟹  ${lang_manager_firewall}\n"
    printf "${GREEN}│ [6]${NC} ⟹  ${lang_permission_manager} Chown/Chmod\n"
    printf "${GREEN}│ [10]${NC} ⟹ ${lang_manager_vps}\n"
    
    # Backup & Tools
    printf "\n${GREEN}┌─ BACKUP & TOOLS ${NC}\n"
    printf "${GREEN}│${NC}\n"
    printf "${GREEN}│ [8]${NC} ⟹  ${lang_manager_backup_restore}\n"
    printf "${GREEN}│ [9]${NC} ⟹  Admin Tool\n"
    printf "${GREEN}│ [11]${NC} ⟹ ${lang_account_manager}\n"
    printf "${GREEN}│ [12]${NC} ⟹ Cronjob/Auto Backup\n"
    printf "${GREEN}│ [13]${NC} ⟹ ${lang_manager_tool}\n"
    
    # System
    printf "\n${GREEN}┌─ SYSTEM ${NC}\n"
    printf "${GREEN}│${NC}\n"
    printf "${GREEN}│ [14]${NC} ⟹ ${lang_manager_update_scripts}\n"
    printf "${GREEN}│ [15]${NC} ⟹ Change language\n"
    printf "${GREEN}│ [0]${NC}  ⟹ Exit\n"
    
    printf "\n${GREEN}══════════════════════════════════════════════════════════════${NC}\n"
    read -r -p " ${GREEN}Enter your choice [0-15]:${NC} " CHOICE
    
    if [ -z "${CHOICE}" ]
    then
        CHOICE=1
        continue
    fi
    case ${CHOICE} in
        1) clear; menu_domain;;
        2) clear; menu_ssl;;
        3) clear; menu_cache;;
        4) clear; menu_lemp;;
        5) clear; menu_firewall;;
        6) clear; menu_permission;;
        7) clear; menu_wordpress;;
        8) clear; menu_backup ;;
        9) clear; menu_admin_tool ;;
        10) clear; menu_vps_manage;;
        11) clear; menu_account ;;
        12) clear; menu_cronjob ;;
        13) clear; menu_tools ;;
        14) clear ; update_script;;
        15) clear ; change_language;;
        0) clear; printf "%s\n" "${GREEN}Bye Bye... Cam on ban da su dung ${AUTHOR} Script${NC}";;
        *) clear; printf "%s\n" "${GREEN}Lua chon cua ban khong chinh xac. Vui long chon lai.${NC}";;
    esac
done
